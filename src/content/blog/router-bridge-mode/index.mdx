---
title: 光猫桥接单臂主路由
publishDate: "2025-03-15 22:19:29"
description: 光猫拨号接单个旁路由下无法获取IPv6-PD的解决方案，通过将光猫改为桥接模式，使用单臂路由进行PPPoE拨号
tags:
  - Net
  - Router
  - IPv6
draft: false
comment: true
language: 中文
---

import { Aside } from 'astro-pure/user'

## 问题描述

在使用光猫拨号并连接单个旁路由的情况下，无法获取IPv6-PD（Prefix Delegation）。即使本地区已经分配了PD，但通过光猫拨号的旁路由LAN6接口只能获取内网PD，或者LAN6接口完全无法获取PD。

## 问题分析

### 尝试的解决方案

尝试了以下方法均无效：

- 将接口RA、DHCP、NDP模式调整为服务器模式
- 将接口RA、DHCP、NDP模式调整为中继模式
- 将接口RA、DHCP、NDP模式调整为混合模式

<Aside type="caution">
这些方法都无法解决IPv6-PD获取问题，说明问题可能出在光猫拨号模式本身。
</Aside>

### 检查IPv6分配情况

可以通过以下工具检查本地区的IPv6-PD分配情况：

- [APNIC Whois Search | APNIC](https://wq.apnic.net/static/search.html) - 查询IP地址分配信息

## 解决方案

### 方案概述

将光猫从拨号模式改为桥接模式，然后使用单臂路由进行PPPoE拨号。这样可以绕过光猫的限制，直接获取IPv6-PD。

### 实施步骤

#### 1. 配置光猫桥接模式

1. 登录光猫管理界面
2. 找到网络设置或WAN设置
3. 将连接模式从"路由模式"改为"桥接模式"
4. 保存设置并重启光猫

<Aside type="tip">
不同品牌的光猫界面可能略有不同，但基本设置位置类似。如果不确定，可以查阅光猫的用户手册或联系运营商。
</Aside>

#### 2. 配置单臂路由

1. 在单臂路由上创建WAN接口
2. 将WAN接口配置为PPPoE拨号模式
3. 输入运营商提供的宽带账号和密码
4. 保存并应用配置

#### 3. 配置DHCP服务

<Aside type="caution">
注意：光猫和单臂路由不能同时开启DHCP服务，否则会导致IP冲突。
</Aside>

配置要点：

- 关闭光猫的DHCP服务
- 在单臂路由上开启DHCP服务
- 将默认网关设置为单臂路由的IP地址

#### 4. 测试网络连接

完成配置后，测试以下功能：

- ✅ 光猫WiFi功能是否正常
- ✅ 光猫网口是否可用
- ✅ 单臂路由是否能正常获取IPv6-PD
- ✅ 网络连接是否稳定

## 配置示例

### 单臂路由WAN接口配置

```plaintext
接口类型：PPPoE
用户名：[运营商提供的账号]
密码：[运营商提供的密码]
MTU：1492（默认值，可根据实际情况调整）
```

### DHCP配置

```plaintext
DHCP服务器：启用
默认网关：192.168.1.1（单臂路由IP）
DNS服务器：可以设置为运营商DNS或公共DNS
```

## 注意事项

1. **备份配置**：在修改光猫设置前，建议先备份当前配置，以便出现问题时可以快速恢复。

2. **记录信息**：记录下光猫的原始设置，包括：
   - 原始连接模式
   - VLAN ID（如果有）
   - 其他特殊配置

3. **测试连接**：每次修改配置后，都要测试网络连接是否正常。

<Aside type="tip">
如果修改后网络出现问题，可以尝试恢复光猫的原始设置，或者联系运营商技术支持。
</Aside>

## 总结

通过将光猫改为桥接模式并使用单臂路由进行PPPoE拨号，可以成功解决IPv6-PD获取问题。这种方法虽然需要额外的配置步骤，但能够提供更好的网络控制能力和IPv6支持。

